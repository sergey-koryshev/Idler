<Window x:Class="Idler.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Idler"
        xmlns:views="clr-namespace:Idler.Views"
        mc:Ignorable="d"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="{Binding FullAppName}"
        Height="450"
        Width="800"
        ResizeMode="CanResizeWithGrip">
    <Window.Resources>
        <CollectionViewSource x:Key="NoteCategoriesList"
                              Source="{Binding NoteCategories.Categories}" />
    </Window.Resources>
    <Window.InputBindings>
        <KeyBinding Modifiers="Control"
                    Key="S"
                    Command="{Binding SaveShiftCommand}" />
    </Window.InputBindings>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition />
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>
        <Menu Grid.Row="0">
            <MenuItem Header="File">
                <MenuItem Header="Export..."
                          Command="{Binding ExportNotesCommand}" />
                <Separator />
                <MenuItem Header="Exit"
                          Click="MnuExit_Click" />
            </MenuItem>
            <MenuItem Header="Options">
                <MenuItem x:Name="mnuSettings"
                          Header="Settings..."
                          Click="MnuSettings_Click" />
            </MenuItem>
            <MenuItem Header="Help">
                <MenuItem Header="Content"
                          Click="MnuContent_Click" />
                <MenuItem Header="About..."
                          Click="MnuAbout_Click" />
            </MenuItem>
        </Menu>
        <Grid Grid.Row="1">
            <DockPanel Background="#7F646464">
                <DockPanel.Style>
                    <Style TargetType="DockPanel">
                        <Setter Property="Visibility"
                                Value="Hidden" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding CurrentShift.IsRefreshing}"
                                         Value="True">
                                <Setter Property="Visibility"
                                        Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </DockPanel.Style>
            </DockPanel>
            <ContentControl Content="{Binding DialogHost}" />
            <Grid Panel.ZIndex="-1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition />
                    <RowDefinition Height="auto" />
                </Grid.RowDefinitions>
                <DockPanel Grid.Row="0"
                           LastChildFill="False"
                           Margin="5">
                    <Button x:Name="btnPreviousShift"
                            DockPanel.Dock="Left"
                            Padding="25,5"
                            Content="&lt;"
                            Command="{Binding ChangeSelectedDateCommand}"
                            CommandParameter="PreviousDate" />
                    <Button Content="Refresh"
                            DockPanel.Dock="Right"
                            Padding="25,5"
                            Command="{Binding RefreshNotesCommand}" />
                    <Button x:Name="btnSave"
                            Content="Save Changes"
                            ToolTip="Ctrl+S"
                            DockPanel.Dock="Right"
                            Padding="25,5"
                            Margin="0,0,5,0"
                            Command="{Binding SaveShiftCommand}" />
                    <DatePicker Margin="5,0"
                                DockPanel.Dock="Left"
                                SelectedDate="{Binding SelectedDate}" 
                                VerticalContentAlignment="Center" />
                    <Button x:Name="btnNextShift"
                            Padding="25,5"
                            Margin="0,0,25,0"
                            DockPanel.Dock="Left"
                            Content="&gt;"
                            Command="{Binding ChangeSelectedDateCommand}"
                            CommandParameter="NextDate" />
                </DockPanel>
                <views:ListNotesView Grid.Row="1" 
                                     DataContext="{Binding ListNotesViewModel}" />
                <views:AddNoteView Grid.Row="2"
                                   DataContext="{Binding AddNoteViewModel}"
                                   Margin="5" />
            </Grid>
        </Grid>
        <StatusBar Grid.Row="3">
            <StatusBarItem>
                <StackPanel Margin="5,0" Orientation="Horizontal">
                    <TextBlock Text="Total Effort: " />
                    <TextBlock Text="{Binding TotalEffort}" />
                </StackPanel>
            </StatusBarItem>
            <Separator />
            <StatusBarItem>
                <ToggleButton
                    IsChecked="{Binding ListNotesViewModel.AreNotesBlurred}"
                    Margin="4,0,0,0">
                    <ToggleButton.Style>
                        <Style TargetType="ToggleButton">
                            <Setter Property="Cursor" Value="Hand" />
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Content">
                                <Setter.Value>
                                    <StackPanel>
                                        <Path Stretch="Uniform">
                                            <Path.Style>
                                                <Style TargetType="Path">
                                                    <Style.Setters>
                                                        <Setter Property="Fill" Value="Black" />
                                                        <Setter Property="Data">
                                                            <Setter.Value>
                                                                <PathGeometry Figures="m 8 0.5 c -1.10458 0 -2 0.89544 -2 2 V 5 C 4.89543 5 4 5.89543 4 7 v 4 c 0 1.1046 0.89543 2 2 2 h 6 c 1.1046 0 2 -0.8954 2 -2 V 7 C 14 5.89543 13.1046 5 12 5 V 2.5 c 0 -1.10456 -0.89539 -2 -2 -2 z m 0 1 h 2 c 0.55231 0 1 0.44771 1 1 V 5 H 7 V 2.5 c 0 -0.55229 0.44772 -1 1 -1 z" />
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style.Setters>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding ListNotesViewModel.AreNotesBlurred}" Value="False">
                                                            <Setter Property="Data">
                                                                <Setter.Value>
                                                                    <PathGeometry Figures="M 4 0.5 C 2.89542 0.5 2 1.39544 2 2.5 L 2 5 L 3 5 L 3 2.5 C 3 1.94771 3.44772 1.5 4 1.5 L 6 1.5 C 6.55228 1.5 7 1.94771 7 2.5 L 7 7 L 2 7 C 0.895431 7 0 7.89543 0 9 L 0 13 C 0 14.1046 0.89543 15 2 15 L 8 15 C 9.10457 15 10 14.1046 10 13 L 10 9 C 10 7.89543 9.10457 7 8 7 L 8 2.5 C 8 1.39544 7.10458 0.5 6 0.5 L 4 0.5 z " />
                                                                </Setter.Value>
                                                            </Setter>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource AncestorType=ToggleButton}}" Value="True">
                                                            <Setter Property="Fill" Value="#FF3E3E3E" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Path.Style>
                                        </Path>
                                    </StackPanel>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border Name="border" BorderThickness="0" BorderBrush="Black" Background="{TemplateBinding Background}">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ToggleButton.Style>
                </ToggleButton>
            </StatusBarItem>
            <StatusBarItem>
                <ToggleButton
                    IsChecked="{Binding CurrentShift.IsReminderEnabled}"
                    Margin="2,0,0,0">
                    <ToggleButton.Style>
                        <Style TargetType="ToggleButton">
                            <Setter Property="Cursor" Value="Hand" />
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Content">
                                <Setter.Value>
                                    <Canvas UseLayoutRounding="False" Width="13.0" Height="14.0" SnapsToDevicePixels="True">
                                        <Canvas.Clip>
                                            <RectangleGeometry Rect="0.0,0.0,13.0,14.0"/>
                                        </Canvas.Clip>
                                        <Path>
                                            <Path.Style>
                                                <Style TargetType="Path">
                                                    <Style.Setters>
                                                        <Setter Property="Fill" Value="Black" />
                                                        <Setter Property="Data">
                                                            <Setter.Value>
                                                                <PathGeometry Figures="m 6.64149 1.26641 c 0 -0.274098 -0.2222 -0.4963 -0.4963 -0.4963 c -0.2741 0 -0.4963 0.222202 -0.4963 0.4963 v 1.1474 c -0.71478 0.07287 -1.46609 0.30556 -2.10399 0.7788 c -0.80858 0.59987 -1.3896 1.55371 -1.50046 2.92667 c -0.0631 0.78154 -0.09709 1.37271 -0.123667 1.84685 l -0.0035 0.06288 c -0.02495 0.44561 -0.04332 0.77384 -0.07407 1.06688 c -0.06151 0.58634 -0.172262 1.03422 -0.519705 1.95482 c -0.09679 0.2564 0.03264 0.5428 0.289087 0.6395 c 0.07098 0.0268 0.144259 0.0363 0.21517 0.0305 c 0.01278 0.001 0.02568 0.0015 0.03871 0.0015 h 2.30618 h 3.9612 h 2.37326 c 0.03389 0.0008 0.06819 -0.0019 0.10237 -0.0083 c 0.05741 -0.0106 0.11135 -0.0311 0.16 -0.0596 c 0.06432 -0.0376 0.11782 -0.0883 0.15829 -0.1473 c 0.04004 -0.0582 0.06805 -0.1253 0.08025 -0.1977 c 0.0096 -0.0562 0.0097 -0.1145 -0.001 -0.1725 c -0.0061 -0.0335 -0.0155 -0.0659 -0.028 -0.0968 c -0.34429 -0.9134 -0.45442 -1.36004 -0.5157 -1.94412 c -0.03074 -0.29301 -0.04911 -0.62121 -0.07405 -1.06675 l -0.0035 -0.06301 c -0.02658 -0.47414 -0.06057 -1.06531 -0.12367 -1.84685 c -0.11221 -1.38975 -0.75415 -2.33999 -1.57956 -2.93149 c -0.64195 -0.46003 -1.3802 -0.69381 -2.041 -0.77063 z m 1.30808 10.9319 c 0.03443 -0.0638 -0.01362 -0.1383 -0.08604 -0.1383 h -3.42059 c -0.07243 0 -0.12048 0.0745 -0.08605 0.1383 c 0.34488 0.6382 1.01998 1.0718 1.79636 1.0718 c 0.77635 0 1.45145 -0.4336 1.79632 -1.0718 z m 1.52655 -2.99885 c 0.05449 0.51941 0.14553 0.94795 0.33826 1.53015 h -7.32227 c 0.19273 -0.5822 0.28377 -1.01074 0.33826 -1.53015 c 0.03335 -0.31789 0.053 -0.66911 0.07719 -1.10176 l 0.0043 -0.07603 c 0.02644 -0.47164 0.05989 -1.05321 0.12201 -1.8225 c 0.08949 -1.10838 0.53994 -1.79205 1.10247 -2.20938 c 0.57604 -0.42734 1.31524 -0.60789 2.01637 -0.6093 c 0.59745 0.0014 1.34325 0.17815 1.95164 0.61412 c 0.59403 0.42569 1.08022 1.11298 1.16835 2.20456 c 0.06212 0.76929 0.09557 1.35086 0.12201 1.8225 l 0.0043 0.07615 c 0.0242 0.43257 0.04384 0.78379 0.07719 1.10164 z"/>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style.Setters>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding CurrentShift.IsReminderEnabled}" Value="False">
                                                            <Setter Property="Data">
                                                                <Setter.Value>
                                                                    <PathGeometry Figures="M 7.96876 12.1782 C 8.0032 12.1144 7.95515 12.0399 7.88272 12.0399 h -3.4206 c -0.07241 0 -0.12045 0.0745 -0.08603 0.1383 c 0.34488 0.6382 1.01996 1.0718 1.79636 1.0718 c 0.77634 0 1.45145 -0.4336 1.79631 -1.0718 z M 6.6607 1.24631 C 6.6607 0.972198 6.43847 0.75 6.16439 0.75 c -0.27411 0 -0.4963 0.222198 -0.4963 0.49631 v 1.1474 C 4.9533 2.46657 4.20199 2.69926 3.56408 3.1725 C 3.3487 3.33229 3.14946 3.51721 2.97095 3.72848 L 1.64769 2.52044 C 1.44375 2.33426 1.1275 2.34866 0.941315 2.5526 C 0.755135 2.75654 0.769531 3.07279 0.973471 3.25897 L 9.13467 10.7095 H 2.51132 C 2.70404 10.1273 2.79507 9.69876 2.84957 9.17935 C 2.88288 8.86191 2.9025 8.51125 2.92665 8.07946 L 2.93103 8.00156 C 2.95745 7.52992 2.9909 6.94835 3.05304 6.17906 C 3.06356 6.07314 3.02353 5.96845 2.94501 5.89658 L 2.3321 5.33552 C 2.27664 5.28474 2.18737 5.31113 2.17082 5.38448 C 2.12022 5.60883 2.08399 5.84692 2.06362 6.09917 C 2.00054 6.88071 1.96655 7.47188 1.93997 7.94601 L 1.93646 8.0089 L 1.93618 8.01366 C 1.91137 8.45685 1.89303 8.78378 1.86239 9.07578 C 1.80087 9.66212 1.69012 10.11 1.34268 11.0306 c -0.09677 0.2564 0.03265 0.5427 0.28909 0.6395 c 0.07098 0.0268 0.14426 0.0363 0.21515 0.0305 c 0.00854 0.0007 0.01712 0.0011 0.02576 0.0013 l 0.01297 0.0002 H 10.222 l 1.0677 0.9748 c 0.2039 0.1861 0.5202 0.1718 0.7064 -0.0322 c 0.1862 -0.2039 0.1718 -0.5202 -0.0322 -0.7064 L 3.70484 4.39846 C 3.84191 4.23111 3.99409 4.08943 4.15551 3.96968 C 4.73153 3.54234 5.47073 3.36179 6.17187 3.36038 C 6.76931 3.36177 7.51512 3.53853 8.1235 3.9745 C 8.71752 4.40019 9.20373 5.08748 9.29187 6.17906 C 9.35397 6.94835 9.38743 7.52992 9.41386 8.00156 L 9.41813 8.0777 c 0.01258 0.225 0.02394 0.42799 0.03663 0.61573 c 0.00855 0.12636 0.06626 0.24412 0.15969 0.32964 L 10.392 9.73493 C 10.4659 9.8025 10.5861 9.7307 10.5662 9.63265 C 10.5284 9.44747 10.5028 9.26915 10.4825 9.07578 C 10.4518 8.7829 10.4334 8.45485 10.4085 8.0096 L 10.4049 7.94601 C 10.3783 7.47188 10.3443 6.88071 10.2812 6.09917 C 10.169 4.70943 9.52709 3.75919 8.70169 3.16768 C 8.05973 2.70764 7.32148 2.47388 6.6607 2.39705 Z" FillRule="Nonzero"/>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource AncestorType=ToggleButton}}" Value="True">
                                                            <Setter Property="Fill" Value="#FF3E3E3E" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Path.Style>
                                        </Path>
                                    </Canvas>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border Name="border" BorderThickness="0" BorderBrush="Black" Background="{TemplateBinding Background}">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ToggleButton.Style>
                </ToggleButton>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
